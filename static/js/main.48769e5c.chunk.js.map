{"version":3,"sources":["services/read_file.ts","services/read_image.ts","services/generate_image_from_palette.ts","services/hsl_to_rgb.ts","services/depixelize.ts","images/placeholder.png","reducers/initial_image.ts","reducers/initial_state.ts","types/actions.ts","actions/source_actions.ts","actions/target_actions.ts","actions/message_actions.ts","actions/busy_actions.ts","actions/palette_actions.ts","reducers/source_reducer.ts","reducers/target_reducer.ts","reducers/root_reducer.ts","reducers/index.ts","services/rgb_to_hsl.ts","services/array_key_normalizer.ts","reducers/map_counter.ts","epics/set_source_contents_epic.ts","services/get_weighted_rgbs_from_histogram.ts","services/map_to_object_array.ts","services/find_closest_pixel_id.ts","services/euclidean_distance.ts","services/get_random.ts","services/random_point_factory.ts","services/generate_random_points.ts","services/point_sort.ts","services/weighted_average_pixel.ts","services/weighted_k_means.ts","services/memoize.ts","services/write_image.ts","services/create_url_from_image_contents.ts","epics/index.ts","services/pixelize.ts","epics/set_source_file_epic.ts","services/create_object_url.ts","epics/set_source_histogram_epic.ts","epics/set_source_palette_epic.ts","epics/set_source_palette_item_epic.ts","epics/set_target_contents_epic.ts","epics/set_target_palette_item_epic.ts","epics/set_target_preview_url_epic.ts","store.ts","components/image_picker.tsx","components/messages.tsx","services/get_first_file.ts","components/image_preview.tsx","App.tsx","services/pipe.ts","App.connect.tsx","App.bootstrapped.tsx","serviceWorker.ts","index.tsx"],"names":["Buffer","__webpack_require__","d","__webpack_exports__","readFile","rxjs__WEBPACK_IMPORTED_MODULE_0__","file","Observable","create","obs","File","Blob","reader","FileReader","onerror","err","error","onabort","onload","result","ArrayBuffer","next","from","onloadend","complete","readAsArrayBuffer","Error","readImage","pngjs__WEBPACK_IMPORTED_MODULE_0__","rxjs__WEBPACK_IMPORTED_MODULE_1__","data","png","PNG","filterType","parse","results","generateImageFromPalette","sourcePalette","targetPalette","pixels","paletteMap","rgbPalette","map","pixel","hslToRgb","concat","Object","_Users_zholyszko_Documents_apps_holyszack_paint_by_numbers_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","color","indexOf","reduce","depixelize","_ref","_ref2","_Users_zholyszko_Documents_apps_holyszack_paint_by_numbers_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","h","s","l","a","chroma","Math","abs","hPrime","x","m","_ref3","_ref4","img","value","index","push","apply","module","exports","initialImage","contents","undefined","palette","path","previewUrl","progress","initialState","busy","messages","paletteSize","source","target","Actions","setSourceFile","createAction","resolve","setSourcePath","setSourcePalette","setSourcePreviewUrl","url","setSourcePaletteItem","item","setSourceContents","height","width","setSourceHistogram","histogram","setSourceProgress","percent","setSourcePixels","setSourcePaletteMap","setTargetPalette","setTargetPreviewUrl","setTargetPaletteItem","setTargetContents","sendMessage","message","setIsBusy","setIsNotBusy","setPaletteSize","size","sourceReducer","state","arguments","length","action","type","getType","_objectSpread","payload","targetReducer","target_reducer_objectSpread","rootReducers","root_reducer_objectSpread","rgbToHsl","toArray","r","g","b","slice","min","max","hue","toConsumableArray","arrayKeyNormalizer","floor","toString","mapCounter","set","get","getWeightedRgbsFromHistogram","forEach","key","mapToObjectArray","weight","split","parseInt","findClosestPixelId","origin","sqrt","pow","acc","euclideanDistance","bestMatch","distance","getRandom","slicedToArray","round","random","randomPointFactory","_ref$dimensions","dimensions","generateRandomPoints","numberOfPoints","_ref$genPixel","genPixel","Array","fill","pointSort","first","second","weightedAveragePixel","_pixels$reduce","avg","weightedKMeans","partitions","population","subscriber","sort","targets","kMeanCycle","method","cache","Map","args","found","output","memoize","point","filter","setTimeout","e","writeImage","spec","newPng","pack","createUrlFromImageContents","stream","blobStream","pipe","on","newImageUrl","toBlobURL","rootEpics","combineEpics","actions","isActionOf","sliceLength","valueLength","pixelize","switchMap","merge","of","Boolean","name","URL","createObjectURL","concatMap","states","withLatestFrom","combineLatest","_ref2$2$payload","epicMiddleware","createEpicMiddleware","store","createStore","compose","applyMiddleware","window","__REDUX_DEVTOOLS_EXTENSION__","run","ImagePicker","onChange","react","Segment","multiple","accept","Messages","getFirstFile","event","currentTarget","files","ImagePreview","Image","src","imagePlaceholder","fluid","centered","Progress","indicating","Group","horizontal","compact","style","backgroundColor","floated","App","react_default","createElement","className","image_picker_ImagePicker","input","Grid","columns","stackable","Column","messages_Messages","connect","dispatch","bindActionCreators","AppComponent","_Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","inherits","createClass","es","App_connect_App","Component","location","hostname","match","ReactDOM","render","App_bootstrapped","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.48769e5c.chunk.js","sourcesContent":["import { Observable, Subscriber } from \"rxjs\";\n\nexport const readFile = (file: File | Blob): Observable<Buffer> => Observable.create((obs: Subscriber<Buffer>) => {\n    if (!(file instanceof File) && !(file instanceof Blob)) {\n        obs.error(new Error('`blob` must be an instance of File or Blob.'));\n        return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onerror = (err) => obs.error(err);\n    reader.onabort = (err) => obs.error(err);\n    reader.onload = () => reader.result instanceof ArrayBuffer\n        ? obs.next(Buffer.from(reader.result))\n        : obs.error(\"No Data Found\");\n    reader.onloadend = () => obs.complete();\n\n    return reader.readAsArrayBuffer(file);\n});\n","import { PNG } from \"pngjs\";\nimport { Observable, Subscriber } from \"rxjs\";\n\nexport const readImage = (data: string | Buffer): Observable<PNG> => Observable.create((obs: Subscriber<PNG>) => {\n    const png = new PNG({ \"filterType\": -1 });\n\n    if (!(typeof data === \"string\") && !(data instanceof Buffer)) {\n        obs.error(new Error('`data` must be an instance of string or Buffer.'));\n        return;\n    }\n    return png.parse(data, (err, results) => {\n        if (err) {\n            obs.error(err);\n        } else {\n            obs.next(results);\n        }\n        obs.complete();\n    });\n});\n","import { hslToRgb } from \"./hsl_to_rgb\";\nimport { depixelize } from \"./depixelize\";\n\nexport function generateImageFromPalette(\n    sourcePalette: [number, number, number][],\n    targetPalette: [number, number, number][],\n    pixels: number[][],\n    paletteMap: (color: [number, number, number]) => [number, number, number],\n) {\n    const rgbPalette = targetPalette\n        .map((pixel) => hslToRgb([...pixel, 255]));\n    const pixelConverter = (color: [number, number, number]) => rgbPalette[sourcePalette.indexOf(paletteMap(color))]\n\n    return Buffer.from((pixels as [number, number, number][])\n        .map(pixelConverter)\n        .reduce(depixelize, []));\n}\n","export const hslToRgb = ([h, s, l, a]: number[]) => {\n    const chroma = (100 - Math.abs(2 * l - 100)) * s;\n    const hPrime = h / 60;\n    const x = chroma * (1 - Math.abs(hPrime % 2 - 1));\n    const m = l * 100 - chroma / 2;\n    const [r, g, b] = hPrime < 1\n        ? [chroma, x, 0]\n        : hPrime < 2\n            ? [x, chroma, 0]\n            : hPrime < 3\n                ? [0, chroma, x]\n                : hPrime < 4\n                    ? [0, x, chroma]\n                    : hPrime < 5\n                        ? [x, 0, chroma]\n                        : hPrime < 6\n                            ? [chroma, 0, x]\n                            : [0, 0, 0];\n    return [\n        255 * (r + m) / 10000, \n        255 * (g + m) / 10000, \n        255 * (b + m) / 10000, \n        a,\n    ];\n};\n","export const depixelize = (img: number[], value: number[], index: number) => {\n    img.push(...value);\n    return img;\n};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAAMcCAMAAACo9Dz9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMEZDRUU0QjREQTIxMUU0ODAwMUVCOTYwMzA5MzE3NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMEZDRUU0QzREQTIxMUU0ODAwMUVCOTYwMzA5MzE3NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAwRkNFRTQ5NERBMjExRTQ4MDAxRUI5NjAzMDkzMTc1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAwRkNFRTRBNERBMjExRTQ4MDAxRUI5NjAzMDkzMTc1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+D7rN8gAAAMZQTFRFvL7A5+jpuLm7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\"","import { Image } from \"../types/image\";\n\nexport const initialImage: Image = {\n    \"contents\": undefined,\n    \"palette\": [],\n    \"path\": \"\",\n    \"previewUrl\": undefined,\n    \"progress\": undefined,\n};\n","import { AppState } from \"../types/app_state\";\nimport { initialImage } from \"./initial_image\";\n\nexport const initialState: AppState = {\n    \"busy\": true,\n    \"messages\": [],\n    \"paletteSize\": 24,\n    \"source\": initialImage,\n    \"target\": initialImage,\n};\n","export const Actions = {\n    \"sendMessage\": \"SEND_MESSAGE\" as \"SEND_MESSAGE\",\n    \"setIsBusy\": \"SET_IS_BUSY\" as \"SET_IS_BUSY\",\n    \"setIsNotBusy\": \"SET_IS_NOT_BUSY\" as \"SET_IS_NOT_BUSY\",\n    \"setPaletteSize\": \"SET_PALETTE_SIZE\" as \"SET_PALETTE_SIZE\",\n    \"setSourceContents\": \"SET_SOURCE_CONTENTS\" as \"SET_SOURCE_CONTENTS\",\n    \"setSourceFile\": \"SET_SOURCE_FILE\" as \"SET_SOURCE_FILE\",\n    \"setSourceHistogram\": \"SET_SOURCE_HISTOGRAM\" as \"SET_SOURCE_HISTOGRAM\",\n    \"setSourcePalette\": \"SET_SOURCE_PALETTE\" as \"SET_SOURCE_PALETTE\",\n    \"setSourcePaletteItem\": \"SET_SOURCE_PALETTE_ITEM\" as \"SET_SOURCE_PALETTE_ITEM\",\n    \"setSourcePaletteMap\": \"SET_SOURCE_PALETTE_MAP\" as \"SET_SOURCE_PALETTE_MAP\",\n    \"setSourcePath\": \"SET_SOURCE_PATH\" as \"SET_SOURCE_PATH\",\n    \"setSourcePixels\": \"SET_SOURCE_PIXELS\" as \"SET_SOURCE_PIXELS\",\n    \"setSourcePreviewUrl\": \"SET_SOURCE_PREVIEW_URL\" as \"SET_SOURCE_PREVIEW_URL\",\n    \"setSourceProgress\": \"SET_SOURCE_PROGRESS\" as \"SET_SOURCE_PROGRESS\",\n    \"setTargetContents\": \"SET_TARGET_CONTENTS\" as \"SET_TARGET_CONTENTS\",\n    \"setTargetPalette\": \"SET_TARGET_PALETTE\" as \"SET_TARGET_PALETTE\",\n    \"setTargetPaletteItem\": \"SET_TARGET_PALETTE_ITEM\" as \"SET_TARGET_PALETTE_ITEM\",\n    \"setTargetPreviewUrl\": \"SET_TARGET_PREVIEW_URL\" as \"SET_TARGET_PREVIEW_URL\",\n    \"setTargetProgress\": \"SET_TARGET_PROGRESS\" as \"SET_TARGET_PROGRESS\",\n};\n","import { createAction } from \"typesafe-actions\";\nimport { Actions } from \"../types/actions\";\nimport { Palette } from \"../types/palette\";\nimport { RGB } from \"../types/rgb\";\n\nexport const setSourceFile = createAction(Actions.setSourceFile, resolve =>\n    (file: File) => resolve({ file }));\nexport const setSourcePath = createAction(Actions.setSourcePath, resolve =>\n    (path: string) => resolve({ path }));\nexport const setSourcePalette = createAction(Actions.setSourcePalette, resolve =>\n    (palette: Palette) => resolve({ palette }));\nexport const setSourcePreviewUrl = createAction(Actions.setSourcePreviewUrl, resolve =>\n    (url: string) => resolve({ url }));\nexport const setSourcePaletteItem = createAction(Actions.setSourcePaletteItem, resolve =>\n    (index: number, item: RGB) => resolve({ index, item }));\nexport const setSourceContents = createAction(Actions.setSourceContents, resolve =>\n    ({ data, height, width }: { \"data\": Buffer, \"height\": number, \"width\": number }) => resolve({ data, height, width }));\nexport const setSourceHistogram = createAction(Actions.setSourceHistogram, resolve =>\n    (histogram: Map<string, number>) => resolve({ histogram }));\nexport const setSourceProgress = createAction(Actions.setSourceProgress, resolve =>\n    (percent: number) => resolve({ percent }));\nexport const setSourcePixels = createAction(Actions.setSourcePixels, resolve =>\n    (pixels: number[][]) => resolve({ pixels }));\nexport const setSourcePaletteMap = createAction(Actions.setSourcePaletteMap, resolve =>\n    (paletteMap: (color: [number, number, number]) => [number, number, number]) => resolve({ paletteMap }));\n","import { createAction } from \"typesafe-actions\";\nimport { Actions } from \"../types/actions\";\nimport { Palette } from \"../types/palette\";\nimport { RGB } from \"../types/rgb\";\n\nexport const setTargetPalette = createAction(Actions.setTargetPalette, resolve =>\n    (palette: Palette) => resolve({ palette }));\nexport const setTargetPreviewUrl = createAction(Actions.setTargetPreviewUrl, resolve =>\n    (url: string) => resolve({ url }));\nexport const setTargetPaletteItem = createAction(Actions.setTargetPaletteItem, resolve =>\n    (index: number, item: RGB) => resolve({ index, item }));\nexport const setTargetContents = createAction(Actions.setTargetContents, resolve =>\n    ({ data, height, width }: {\"data\": Buffer, \"height\": number, \"width\": number}) => resolve({ data, height, width }));\n","import { createAction } from \"typesafe-actions\";\nimport { Actions } from \"../types/actions\";\n\nexport const sendMessage = createAction(Actions.sendMessage, resolve =>\n    (message: string) => resolve({ message }));\n","import { createAction } from \"typesafe-actions\";\nimport { Actions } from \"../types/actions\";\n\nexport const setIsBusy = createAction(Actions.setIsBusy, resolve =>\n    () => resolve());\nexport const setIsNotBusy = createAction(Actions.setIsNotBusy, resolve =>\n    () => resolve());\n","import { createAction } from \"typesafe-actions\";\nimport { Actions } from \"../types/actions\";\n\nexport const setPaletteSize = createAction(Actions.setPaletteSize, resolve =>\n    (size: number) => resolve({ size }));\n","import { getType } from \"typesafe-actions\";\nimport { Action } from \"../types/action\";\nimport { setSourcePath, setSourcePreviewUrl, setSourceHistogram, setSourceContents, setSourcePalette, setSourceProgress } from \"../actions\";\nimport { initialImage } from \"./initial_image\";\nimport { Image } from \"../types/image\";\n\nexport const sourceReducer = (state: Image = initialImage, action: Action): Image => {\n    switch (action.type) {\n        case getType(setSourcePath):\n            return { ...state, \"path\": action.payload.path };\n        case getType(setSourcePreviewUrl):\n            return { ...state, \"previewUrl\": action.payload.url };\n        case getType(setSourceContents):\n            return { ...state, \"contents\": action.payload };\n        case getType(setSourceHistogram):\n            return { ...state, \"histogram\": action.payload.histogram };\n        case getType(setSourcePalette):\n            return {\n                ...state,\n                \"palette\": action.payload.palette,\n                \"progress\": undefined,\n            };\n        case getType(setSourceProgress):\n            return action.payload.percent > (state.progress || -1)\n                ? { ...state, progress: action.payload.percent }\n                : state;\n        default:\n            return state;\n    }\n}\n","import { getType } from \"typesafe-actions\";\nimport { Action } from \"../types/action\";\nimport { setTargetPreviewUrl, setTargetContents, setTargetPalette } from \"../actions\";\nimport { initialImage } from \"./initial_image\";\nimport { Image } from \"../types/image\";\n\nexport const targetReducer = (state: Image = initialImage, action: Action): Image => {\n    switch (action.type) {\n        case getType(setTargetPreviewUrl):\n            return { ...state, previewUrl: action.payload.url };\n        case getType(setTargetContents):\n            return { ...state, contents: action.payload };\n        case getType(setTargetPalette):\n            return { ...state, palette: action.payload.palette };\n        default:\n            return state;\n    }\n}\n","import { AppState } from \"../types/app_state\";\nimport { initialState } from \"./initial_state\";\nimport { Action } from \"../types/action\";\nimport { getType } from \"typesafe-actions\";\nimport * as Actions from \"../actions\";\nimport { sourceReducer } from \"./source_reducer\";\nimport { targetReducer } from \"./target_reducer\";\n\nexport const rootReducer = (state: AppState = initialState, action: Action): AppState => {\n    switch (action.type) {\n        case getType(Actions.sendMessage):\n            return { ...state, messages: state.messages.concat(action.payload.message) }\n        case getType(Actions.setIsBusy):\n            return { ...state, busy: true };\n        case getType(Actions.setIsNotBusy):\n            return { ...state, busy: false };\n        case getType(Actions.setPaletteSize):\n            return { ...state, paletteSize: action.payload.size };\n        default:\n            return {\n                ...state,\n                source: sourceReducer(state.source, action),\n                target: targetReducer(state.target, action),\n            };\n    }\n}\n","import { rootReducer } from \"./root_reducer\";\n\nexport const rootReducers = rootReducer;\n","export const rgbToHsl = ([r, g, b, ...a]: number[]) => {\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    const chroma = max - min;\n    const hue = chroma === 0\n        ? 0\n        : max === r\n            ? 60 * (((g - b) / chroma) % 6)\n            : max === g\n                ? 60 * (((b - r) / chroma) + 2)\n                : max === b\n                    ? 60 * (((r - g) / chroma) + 4)\n                    : -1;\n    const saturation = max === 0 ? 0 : 100 * chroma / max;\n    const lightness = 50 * (max + min) / 255;\n    const positiveHue = hue < 0 ? hue + 360 : hue;\n    return [positiveHue, saturation, lightness, ...a];\n};\n","export function arrayKeyNormalizer(a: number[]) {\n    return a.map(Math.floor).toString();\n} \n","export function mapCounter<T>(map: Map<T, number>, item: T) {\n    return map.set(item, (map.get(item) || 0) + 1);\n};\n","\nimport { Epic } from \"redux-observable\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { filter, map, switchMap } from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { pixelize } from \"../services/pixelize\";\nimport { setSourceHistogram, setSourcePixels, setSourceContents } from \"../actions\";\nimport { merge, of } from \"rxjs\";\nimport { rgbToHsl } from \"../services/rgb_to_hsl\";\nimport { arrayKeyNormalizer } from \"../services/array_key_normalizer\";\nimport { mapCounter } from \"../reducers/map_counter\";\n\nexport const setSourceContentsEpic: Epic<Action, Action, AppState> = (actions) => actions.pipe(\n    filter(isActionOf(setSourceContents)),\n    map(({ payload }) => payload.data.reduce(pixelize(), [])),\n    map((pixels) => pixels.map(rgbToHsl)),\n    switchMap((pixels) => merge(\n        of(setSourcePixels(pixels)),\n        of(pixels).pipe(\n            map((pixels) => pixels\n                .map(arrayKeyNormalizer)\n                .reduce(mapCounter, new Map<string, number>())\n            ),\n            map(setSourceHistogram),\n        ),\n    )),\n);\n","import { mapToObjectArray } from \"./map_to_object_array\";\nimport { WeightedRGB } from \"../types/weighted_rgb\";\n\nexport function getWeightedRgbsFromHistogram(histogram: Map<string, number>) {\n    return mapToObjectArray(histogram)\n        .map(({ key, value: weight }) => ({\n            \"value\": key.split(\",\").map((a) => parseInt(a, 10)),\n            weight,\n        }) as WeightedRGB);\n}\n","export function mapToObjectArray<K, V>(map: Map<K, V>) {\n    const results: Array<{key: K, value: V}> = [];\n    map.forEach((value, key) => results.push({key, value}));\n    return results;\n}\n","import { euclideanDistance } from \"./euclidean_distance\";\nimport { RGB } from \"../types/rgb\";\n\nexport function findClosestPixelId(pixels: RGB[]) {\n    return (target: RGB): number => pixels\n        .map((item) => euclideanDistance(item, target))\n        .reduce(\n            (bestMatch, distance, index) => ((bestMatch.value === -1) || (bestMatch.distance > distance))\n                ? { distance, \"value\": index }\n                : bestMatch,\n            { \"distance\": 10000000, \"value\": -1 }\n        ).value;\n};\nexport default findClosestPixelId;\n","import { RGB } from \"../types/rgb\";\n\nexport function euclideanDistance(origin: RGB, target: RGB): number {\n    return Math.sqrt(origin\n        .map((value, index) => (target[index] - origin[index]) ** 2)\n        .reduce((acc, value) => acc + value));\n};\n","export function getRandom([min, max]: [number, number]) {\n    return Math.round(Math.random() * (max - min)) + min;\n}\n","import { RGB } from \"../types/rgb\";\nimport { getRandom } from \"./get_random\";\n\nexport function randomPointFactory({\n    dimensions = [[0, 360], [0, 100], [0, 100]],\n}: {\n    \"dimensions\"?: [[number, number], [number, number], [number, number]]\n} = {}) {\n    return dimensions.map(getRandom) as RGB;\n}\n\nexport default randomPointFactory;\n","import { randomPointFactory } from \"./random_point_factory\";\nimport { RGB } from \"../types/rgb\";\n\nexport function generateRandomPoints({\n    numberOfPoints,\n    genPixel = randomPointFactory,\n}: {\n    numberOfPoints: number,\n    genPixel?: () => RGB,\n}) {\n    return Array(numberOfPoints).fill(0).map(() => genPixel());\n};\nexport default generateRandomPoints;\n","import { RGB } from \"../types/rgb\";\n\nexport function pointSort(first: RGB, second: RGB) {\n    return (first[0] - second[0])\n        || (first[2] - second[2])\n        || (first[1] - second[1]);\n};\nexport default pointSort;\n","import { randomPointFactory } from \"./random_point_factory\";\nimport { RGB } from \"../types/rgb\";\nimport { WeightedRGB } from \"../types/weighted_rgb\";\n\nexport function weightedAveragePixel(pixels: WeightedRGB[]): RGB {\n    if (!pixels.length) {\n        return randomPointFactory();\n    }\n    const { value, weight } = pixels.reduce(\n        (avg, { value, weight }) => ({\n            \"value\": avg.value.map((item, index) => item + value[index] * weight) as RGB,\n            \"weight\": avg.weight + weight,\n        }),\n        { \"value\": [0, 0, 0], \"weight\": 0 },\n    )\n    return value.map((item) => Math.floor(item / (weight || 1))) as RGB;\n};\n","import { findClosestPixelId } from \"./find_closest_pixel_id\";\nimport { generateRandomPoints } from \"./generate_random_points\";\nimport { pointSort } from \"./point_sort\";\nimport { WeightedRGB } from \"../types/weighted_rgb\";\nimport { Palette } from \"../types/palette\";\nimport { weightedAveragePixel } from \"./weighted_average_pixel\";\nimport { Observable } from \"rxjs\";\nimport { RGB } from \"../types/rgb\";\nimport { memoize } from \"./memoize\";\n\nexport type WeightedKMeans = {\n    \"progress\": number;\n    \"partitions\": number;\n    \"complete\": boolean;\n    \"palette\": RGB[];\n    \"paletteMap\": (args: [number, number, number]) => number;\n}\n\nexport function weightedKMeans(partitions: number) {\n    return (population: WeightedRGB[]) => new Observable<WeightedKMeans>((subscriber) => {\n        try {\n\n            let palette = generateRandomPoints({ \"numberOfPoints\": partitions })\n                .sort(pointSort);\n            subscriber.next({ progress: 0, partitions, complete: false, palette, paletteMap: () => -1 });\n            let targets: Palette = [];\n            const kMeanCycle = () => {\n                targets = palette;\n                const paletteMap = memoize(findClosestPixelId(targets));\n                palette = population\n                    .reduce(\n                        (acc, point) => {\n                            acc[paletteMap(point.value)].push(point);\n                            return acc;\n                        },\n                        Array(partitions).fill(0).map(() => []) as WeightedRGB[][]\n                    )\n                    .map(weightedAveragePixel)\n                    .sort(pointSort);\n\n                const progress = targets.filter((target, index) => target.toString() === palette[index].toString()).length;\n                const complete = progress === partitions;\n                subscriber.next({ progress, partitions, complete, palette, paletteMap });\n                if (complete) {\n                    subscriber.complete();\n                } else {\n                    setTimeout(kMeanCycle, 0);\n                }\n            }\n            kMeanCycle();\n        } catch (e) {\n            subscriber.error(e);\n            subscriber.complete();\n        }\n    });\n}\nexport default weightedKMeans;\n","export function memoize<V extends { \"toString\": () => string }, T>(method: (args: V) => T) {\n    const cache = new Map<string, T>();\n    return (args: V) => {\n        const key = args.toString();\n        const found = cache.get(key);\n        if (found) {\n            return found;\n        } else {\n            const output = method(args);\n            cache.set(key, output);\n            return output;\n        }\n    }\n}\n","import { PNG } from \"pngjs\";\n\nexport const writeImage = (spec: {\n    \"width\": number,\n    \"height\": number,\n    \"data\": Buffer,\n}) => {\n    const { height, width, data } = spec;\n    const newPng = new PNG({ \"filterType\": -1, width, height });\n    newPng.data = data;\n    return newPng.pack();\n};\nexport default writeImage;\n","import blobStream from \"blob-stream\";\nimport { writeImage } from \"./write_image\";\nimport { Observable } from \"rxjs\";\n\nexport function createUrlFromImageContents(contents: {\n    \"data\": Buffer;\n    \"height\": number;\n    \"width\": number;\n}): Observable<string> {\n    return new Observable((subscriber) => {\n        const stream = blobStream();\n        writeImage(contents)\n            .pipe(stream)\n            .on(\"finish\", () => {\n                const newImageUrl = stream.toBlobURL();\n                subscriber.next(newImageUrl);\n                subscriber.complete();\n            })\n            .on(\"error\", (err) => {\n                subscriber.error(err);\n            });\n    });\n}\n","import { combineEpics } from \"redux-observable\";\nimport { setSourceContentsEpic } from \"./set_source_contents_epic\";\nimport { setSourceFileEpic } from \"./set_source_file_epic\";\nimport { setSourceHistogramEpic } from \"./set_source_histogram_epic\";\nimport { setSourcePaletteEpic } from \"./set_source_palette_epic\";\nimport { setSourcePaletteItemEpic } from \"./set_source_palette_item_epic\";\nimport { setTargetContentsEpic } from \"./set_target_contents_epic\";\nimport { setTargetPaletteItemEpic } from \"./set_target_palette_item_epic\";\nimport { setTargetPreviewUrlEpic } from \"./set_target_preview_url_epic\";\n\nexport const rootEpics = combineEpics(\n    setSourceContentsEpic,\n    setSourceFileEpic,\n    setSourceHistogramEpic,\n    setSourcePaletteEpic,\n    setSourcePaletteItemEpic,\n    setTargetContentsEpic,\n    setTargetPaletteItemEpic,\n    setTargetPreviewUrlEpic,\n);\n","export const pixelize = (sliceLength = 4, valueLength = 3) =>\n    (img: number[][], value: number, index: number) => {\n        if (index % sliceLength === 0) {\n            img.push([value]);\n        } else if (index % sliceLength < valueLength) {\n            img[img.length - 1].push(value);\n        }\n        return img;\n    };\n","import { switchMap, filter, map } from \"rxjs/operators\";\nimport { merge, Observable } from \"rxjs\";\nimport { Action } from \"../types/action\";\nimport {\n    sendMessage,\n    setSourceContents,\n    setSourceFile,\n    setSourcePath,\n    setSourcePreviewUrl,\n} from \"../actions\";\nimport { of } from \"rxjs\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { readFile } from \"../services/read_file\";\nimport { readImage } from \"../services/read_image\";\nimport { createObjectUrl } from \"../services/create_object_url\";\n\nexport function setSourceFileEpic(actions: Observable<Action>): Observable<Action> {\n    return actions.pipe(\n        filter(isActionOf(setSourceFile)),\n        filter(({ payload }) => Boolean(payload.file)),\n        switchMap(({ payload }) =>\n            merge(\n                of(\n                    sendMessage(payload.file.name),\n                    setSourcePath(payload.file.name),\n                    setSourcePreviewUrl(createObjectUrl(payload.file)),\n                ),\n                readFile(payload.file).pipe(\n                    switchMap(readImage),\n                    map((png) => setSourceContents(png)),\n                ),\n            )\n        )\n    );\n}\n","export function createObjectUrl(file: any) {\n    return URL.createObjectURL(file);\n}\n","\nimport { Epic } from \"redux-observable\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { filter, map, switchMap, concatMap } from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { of } from \"rxjs\";\nimport { sendMessage, setSourcePalette, setSourceProgress, setSourceHistogram, setSourcePaletteMap } from \"../actions\";\nimport { getWeightedRgbsFromHistogram } from \"../services/get_weighted_rgbs_from_histogram\";\nimport weightedKMeans from \"../services/weighted_k_means\";\n\nexport const setSourceHistogramEpic: Epic<Action, Action, AppState> = (actions, state) => actions.pipe(\n    filter(isActionOf(setSourceHistogram)),\n    map(({ payload }) => payload.histogram),\n    map(getWeightedRgbsFromHistogram),\n    switchMap(weightedKMeans(state.value.paletteSize)),\n    concatMap(({ progress, complete, partitions, palette, paletteMap }) => palette && complete\n        ? of(\n            setSourcePaletteMap((color: [number, number, number]) => palette[paletteMap(color)]),\n            setSourcePalette(palette),\n            sendMessage(palette.toString()),\n        )\n        : of(\n            setSourceProgress(progress * 100 / partitions),\n        )\n    ),\n);\n","\nimport { Epic } from \"redux-observable\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { filter, map } from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { setSourcePalette, setTargetPalette } from \"../actions\";\n\n\nexport const setSourcePaletteEpic: Epic<Action, Action, AppState> = (actions) => actions.pipe(\n    filter(isActionOf(setSourcePalette)),\n    map(({ payload }) => payload.palette),\n    map(setTargetPalette)\n);\n","import { Observable } from \"rxjs\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { setSourcePaletteItem, setSourcePalette } from \"../actions\";\nimport { filter, withLatestFrom, map } from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\n\nexport function setSourcePaletteItemEpic(actions: Observable<Action>, states: Observable<AppState>): Observable<Action> {\n    return actions.pipe(\n        filter(isActionOf(setSourcePaletteItem)),\n        withLatestFrom(states),\n        map(([action, state]) => {\n            const palette = [...state.source.palette];\n            palette[action.payload.index] = action.payload.item;\n            return setSourcePalette(palette);\n        }),\n    );\n}","import { Observable, combineLatest } from \"rxjs\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { setTargetContents, setTargetPalette, setSourceContents, setSourcePixels, setSourcePaletteMap, setSourcePalette } from \"../actions\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { filter, map } from \"rxjs/operators\";\nimport { generateImageFromPalette } from \"../services/generate_image_from_palette\";\n\nexport function setTargetContentsEpic(actions: Observable<Action>, states: Observable<AppState>): Observable<Action> {\n    return combineLatest([\n        actions.pipe(filter(isActionOf(setSourcePalette))),\n        actions.pipe(filter(isActionOf(setTargetPalette))),\n        actions.pipe(filter(isActionOf(setSourceContents))),\n        actions.pipe(filter(isActionOf(setSourcePaletteMap))),\n        actions.pipe(filter(isActionOf(setSourcePixels))),\n    ]).pipe(\n        map(([\n            {payload: {palette: sourcePalette}}, \n            {payload: {palette: targetPalette}}, \n            {payload: { width, height}}, \n            {payload: {paletteMap}},\n            {payload: {pixels}}, \n        ]) =>\n            setTargetContents({ \"data\": generateImageFromPalette(sourcePalette, targetPalette, pixels, paletteMap),  height, width })),\n    );\n}\n","import { Observable } from \"rxjs\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { setTargetPalette, setTargetPaletteItem } from \"../actions\";\nimport { filter, withLatestFrom, map } from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\n\nexport function setTargetPaletteItemEpic(actions: Observable<Action>, states: Observable<AppState>): Observable<Action> {\n    return actions.pipe(\n        filter(isActionOf(setTargetPaletteItem)),\n        withLatestFrom(states),\n        map(([action, state]) => {\n            const palette = [...state.target.palette];\n            palette[action.payload.index] = action.payload.item;\n            return setTargetPalette(palette);\n        }),\n    );\n}","import { Observable } from \"rxjs\";\nimport { Action } from \"../types/action\";\nimport { AppState } from \"../types/app_state\";\nimport { setTargetContents, setTargetPreviewUrl } from \"../actions\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { filter, map, switchMap } from \"rxjs/operators\";\nimport { createUrlFromImageContents } from \"../services/create_url_from_image_contents\";\n\nexport function setTargetPreviewUrlEpic(actions: Observable<Action>, states: Observable<AppState>): Observable<Action> {\n    return actions.pipe(\n        filter(isActionOf(setTargetContents)),\n        map(({ payload }) => payload),\n        switchMap(createUrlFromImageContents),\n        map(setTargetPreviewUrl),\n    );\n}\n","import { Store, applyMiddleware, createStore, compose } from \"redux\";\nimport { rootReducers } from \"./reducers\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { rootEpics } from \"./epics\";\nimport { Action } from \"./types/action\";\nimport { AppState } from \"./types/app_state\";\ndeclare global {\n    interface Window {\n        __REDUX_DEVTOOLS_EXTENSION__: Function;\n    }\n}\nconst epicMiddleware = createEpicMiddleware<Action, Action, AppState>();\n\nexport const store: Store = createStore(\n    rootReducers,\n    compose(\n        applyMiddleware(epicMiddleware),\n        window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n    )\n);\n\nepicMiddleware.run(rootEpics);\n","import * as React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\n\nexport type ImagePickerProps = {\n    \"onChange\": (event: React.ChangeEvent<HTMLInputElement>) => void;\n};\n\nexport const ImagePicker = ({ onChange }: ImagePickerProps) => (\n    <Segment>\n        <input\n            type=\"file\"\n            // style={{ \"display\": \"none\" }}\n            multiple={false}\n            accept=\"image/png\"\n            onChange={onChange}\n        >\n        </input>\n    </Segment>\n);\n","import * as React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\n\nexport type MessagesProps = {\n    messages: string[];\n}\n\nexport const Messages = ({ messages }: MessagesProps) => (\n    <Segment>\n        <ul>\n            {messages.map((message) => (\n                <li key={message}>{message}</li>\n            ))}\n        </ul>\n    </Segment>\n);\n","export const getFirstFile = <T>(event: React.ChangeEvent<HTMLInputElement>): File => {\n    if (!event.currentTarget.files) {\n        throw Error(\"No File Selected\");\n    }\n    return event.currentTarget.files[0];\n}\n","import { Segment, Progress, Image } from \"semantic-ui-react\";\nimport * as React from \"react\";\nimport imagePlaceholder from \"../images/placeholder.png\";\nimport { Palette } from \"../types/palette\";\n\nexport type ImagePreviewProps = {\n    palette: Palette,\n    previewUrl?: string,\n    progress?: number,\n};\n\nexport function ImagePreview({ palette, previewUrl, progress }: ImagePreviewProps) {\n    return (\n        <Segment>\n            <Image src={previewUrl || imagePlaceholder} fluid centered />\n            {typeof progress === \"number\"\n                ? <Progress percent={progress} indicating />\n                : undefined\n            }\n            {palette\n                ? <Segment.Group>\n                    {palette.map((item) => (\n                        <Segment.Group\n                            horizontal\n                            compact\n                            key={`source-${item}`}\n                            style={{\n                                \"backgroundColor\": `hsl(${item[0]},${item[1]}%,${item[2]}%)`,\n                                \"color\": item[2] < 50 ? \"white\" : \"black\",\n                            }}\n                        >\n                            <Segment floated=\"left\" compact>{item[0]}</Segment>\n                            <Segment compact>{item[1]}%</Segment>\n                            <Segment floated=\"right\" compact>{item[2]}%</Segment>\n                        </Segment.Group>\n                    ))}\n                </Segment.Group>\n                : undefined}\n        </Segment>\n    );\n}\n","import React from 'react';\nimport './App.css';\nimport { ImagePicker } from \"./components/image_picker\";\nimport { Messages } from \"./components/messages\";\nimport { AppState } from \"./types/app_state\";\n// import { log } from \"./services/log\";\nimport { Segment, Grid } from \"semantic-ui-react\";\nimport { AppActions } from \"./App.connect\";\nimport { pipe } from \"./services/pipe\";\nimport { getFirstFile } from \"./services/get_first_file\";\nimport 'semantic-ui-css/semantic.min.css'\nimport { ImagePreview } from \"./components/image_preview\";\n\nexport const App = ({\n    setSourceFile,\n    source,\n    target,\n    messages,\n}: AppState & AppActions) => {\n    return (\n        <Segment.Group className=\"App\">\n            <ImagePicker onChange={pipe(getFirstFile, setSourceFile)} />\n            <Grid columns={2} stackable>\n                <Grid.Column>\n                    <ImagePreview {...source} />\n                </Grid.Column>\n                <Grid.Column>\n                    <ImagePreview {...target} />\n                </Grid.Column>\n            </Grid>\n            <Messages messages={messages} />\n        </Segment.Group>\n    );\n};\n\nexport default App;\n","export const pipe = <T, U, V>(first: (input: T) => U, second: (input: U) => V) =>\n    (input: T) => second(first(input));\n","import { App as AppComponent } from \"./App\";\nimport { AppState } from \"./types/app_state\";\nimport { Dispatch, bindActionCreators, AnyAction } from \"redux\";\nimport { connect } from \"react-redux\";\nimport * as Actions from \"./actions\";\n\nexport type AppActions = {\n    [K in keyof typeof Actions]: typeof Actions[K];\n}\n\nconst mapStateToProps = (state: AppState) => state;\n\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) => bindActionCreators(Actions, dispatch);\n\nexport const App = connect(mapStateToProps, mapDispatchToProps)(AppComponent);\n\nexport default App;\n","import React, { Component } from 'react';\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store\";\nimport { App as ConnectedApp } from \"./App.connect\";\n\nexport class App extends Component {\n    render() {\n        return (\n            <Provider store={store}>\n                <ConnectedApp />\n            </Provider>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config: any) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config: any) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config: any) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.bootstrapped';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}